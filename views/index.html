<!DOCTYPE html>
<html>
<head>
<link href="https://fonts.googleapis.com/css?family=Radley" rel="stylesheet">
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.0/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
	 <link rel="stylesheet" href="/style.css">
	</head>
		<center>
	
			<header>
		<div id = "wrapper">
			<nav>
				Login || Register || About
			</nav>	
			<h1 class ="title">
				Infinitum
			</h1>
			<h1 class = "subtitle">
				Nightlife Coordination App
			</h1>

			<form method = "POST" action="/searching">
				<input placeholder = "Search your location" class = "citySearch" name ="city">
			</input>
				<button class = "subBut" type = "submit">
				Search
				</button>
			</form>

			</div>
			</header>
			</center>

			<div id = "photoGallery">
			</div>
			<body>
			<div id = "app">
				</div>

	<script src="https://cdnjs.cloudflare.com/ajax/libs/react/0.14.7/react.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/react/0.14.7/react-dom.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/babel-core/5.8.23/browser.min.js"></script>

    <script type="text/babel">

    	//Parse Cookies Start
    var w;
    var alp = document.cookie.split(";")

		for(var i=0; i< alp.length; i++){
        var z = alp[i].split("=");     
        if(alp[i].split("=")[0] == " locs" ||alp[i].split("=")[0] == "locs" ){
          w = i;
        }
    }

     var a = alp[w].split("=");
    var b = a[1].replace(/%20/g," ");
    var c = b.replace(/%3A/g,":");
    var d = c.replace(/%22/g, '"');
    var e = d.replace(/%3A/g, ":");
    var f = e.replace(/%5B%7B/g,"[{")
    var g = f.replace(/%7D%5D/g, "}]")
    var h = g.replace(/%7D/g, "}")
    var j = h.replace(/%7B/g, "{")
    var k = j.replace(/%3F/g,"?");
    var l = k.replace(/%2C/g,",");
    var m = l.replace(/j:/g,"")
    var n = m.slice(3,m.length)
    var final = n.slice(0,n.length-3)
    var final2 = final.replace(/%26/g, "&")
    var dataset = final2.split(",")


		for(var i=0; i< alp.length; i++){
        var z = alp[i].split("=");     
        if(alp[i].split("=")[0] == " photos" ||alp[i].split("=")[0] == "photos" ){
          w = i;
        }
    }
     var a = alp[w].split("=");
    var b = a[1].replace(/%20/g," ");
    var c = b.replace(/%3A/g,":");
    var d = c.replace(/%22/g, '"');
    var e = d.replace(/%3A/g, ":");
    var f = e.replace(/%5B%7B/g,"[{")
    var g = f.replace(/%7D%5D/g, "}]")
    var h = g.replace(/%7D/g, "}")
    var j = h.replace(/%7B/g, "{")
    var k = j.replace(/%3F/g,"?");
    var l = k.replace(/%2C/g,",");
    var m = l.replace(/j:/g,"")
    var n = m.slice(3,m.length)
    var final = n.slice(0,n.length-3)
    var final2 = final.replace(/%26/g, "&")
    var final3 = final2.replace(/%2F/g, "/")
    var dataset2 = final3.split(",")
    //Parse cookies end

    var NameBox = React.createClass({
    render: function(){
	return(
	    <div>
    	<h1>{this.props.ident}</h1>
    	<img className ="imgs" src = {this.props.image}/>
    </div>
  	)}
});
	var Main = React.createClass({
	getInitialState: function(){
	return {locations: dataset, images: dataset2}
},
	render: function(){

	return(
	<div>
		<ul>
			{
		this.state.locations.map((x,i)=>{
		var insert = x.slice(1, x.length-1)
		var image = this.state.images[i].slice(1, this.state.images[i].length-1)
		
		return(
		<li className = "box">
			<NameBox key ={i} ident = {insert} image = {image} />
		</li>
		)
	})
	}
</ul>

	</div>
  )
}
})



    ReactDOM.render(<Main/>, document.getElementById('app'))
      document.getElementById("app").scrollIntoView({behavior: "smooth", block: "start", inline: "nearest"});
    </script>
		<script src = "/home.js">

		</script>
	</body>
</html>